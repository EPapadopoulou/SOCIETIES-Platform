<html xmlns="http://www.w3.org/1999/xhtml">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="templates/main_template.xhtml">

    <ui:define name="html_head">
        <title>SOCIETIES</title>
    </ui:define>

    <ui:define name="body">
        <div class="hr grid_12 clearfix"></div>
        
        <!-- Left Column -->
        <section id="left_col" class="grid_12">
            <div class="breadcrumbs"><a href="index.xhtml">Home</a>
                / <a href="your_installed_apps.xhtml">Apps</a>
            </div>

            <section class="form_style_main">

                <h4 class="form_title"><h:outputText value="#{servicesController.header}"/></h4>
                <ui:repeat value="#{servicesController.currentServices}" var="service">
				<li><h:panelGrid columns="2">
					<p:column>
					<img alt="" src="images/app_pic_sample1.jpg" height="48" width="48"/>				
					<p:commandButton value="Start" rendered="#{!service.started}" action="#{servicesController.startService}" process="@this">
						<f:setPropertyActionListener target="#{servicesController.serviceId}" value="service.id" />
					</p:commandButton>					
					<p:commandButton value="Stop" rendered="#{!service.started}" action="#{servicesController.stopService}" process="@this">
						<f:setPropertyActionListener target="#{servicesController.serviceId}" value="service.id" />
					</p:commandButton>
					<p:commandButton value="Install" rendered="#{service.installed}" action="#{servicesController.installService}" process="@this">
						<f:setPropertyActionListener target="#{servicesController.serviceId}" value="service.id" />
					</p:commandButton>
					<p:commandButton value="Remove" rendered="#{service.installed}" action="#{servicesController.removeService}" process="@this">
						<f:setPropertyActionListener target="#{servicesController.serviceId}" value="service.id" />
					</p:commandButton>
					</p:column>

					<p:column>
					<p:commandLink value="#{service.name}" action="#{servicesController.viewServiceDetails" process="@this">
						<f:setPropertyActionListener target="#{servicesController.serviceId}" value="service.id" />
					</p:commandLink>
					<h:outputText value="#{service.description}" />
					</p:column>
				</h:panelGrid>  
				</li>
				</ui:repeat>

                <div class="hr dotted clearfix"></div>


            </section>
        </section>
        
        <aside id="sidebar_right" class="grid_4">
            <div class="sidebar_top_BG"></div>
            <div class="hr dotted clearfix"></div>
            <section>
                <header>
                    <h3>App Search</h3>
                </header>
            </section>
            <section>
                <header>
                    <h3>Apps & Communities</h3>
                </header>
			<p:selectOneMenu id="nodeMenu" value="#{servicesController.selectedNode}" effect="fade">
            	<f:selectItem itemLabel="My Installed Apps" itemValue="mynode" />
            	<f:selectItems value="#{servicesController.nodeList}" var="node" itemLabel="#{node.name}" itemValue="#{node.cisid}"/>
            	<p:ajax update="left_col" listener="#{servicesController.selectNode}" process="@this"/>
        		</p:selectOneMenu>
            </section>
            <section>
                <header>
                    <h3>Install App</h3>
                </header>
                <div class="hr dotted clearfix"></div>
                    <p:fileUpload fileUploadListener="#{servicesController.handleFileUpload}" mode="advanced" dragDropSupport="true"  
                    allowTypes="/(\.|\/)(jar|war)$/" />  
				<p:messages id="serMessages" showDetail="true" autoUpdate="true" closable="true" for="serviceMessages"/>
            </section>
            <div class="hr dotted clearfix"></div>
            <div class="sidebar_bottom_BG"></div>
        </aside>

        <div class="hr grid_12 clearfix"></div>

    </ui:define>
</ui:composition>
</html>
